<!doctype html><html class=no-js lang=ja-jp><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#1b1b1b"><title>Windows11でhugoを使用する手順 | bellbind's trial</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Windows11でhugoを使用する手順"><meta property="og:description" content="Windows11上でHugoプロジェクトをセットアップし、Github Pagesへの自動更新環境を作る方法。"><meta property="og:type" content="article"><meta property="og:url" content="/post/2023-06-14-hugo-on-windows/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-06-14T14:03:21+09:00"><meta property="article:modified_time" content="2023-06-14T14:03:21+09:00"><meta itemprop=name content="Windows11でhugoを使用する手順"><meta itemprop=description content="Windows11上でHugoプロジェクトをセットアップし、Github Pagesへの自動更新環境を作る方法。"><meta itemprop=datePublished content="2023-06-14T14:03:21+09:00"><meta itemprop=dateModified content="2023-06-14T14:03:21+09:00"><meta itemprop=wordCount content="317"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Windows11でhugoを使用する手順"><meta name=twitter:description content="Windows11上でHugoプロジェクトをセットアップし、Github Pagesへの自動更新環境を作る方法。"><link rel=stylesheet href=/css/bundle.css><link rel=stylesheet href=/css/themes/dark-blue.css><link rel=icon href=/icons/16.png sizes=16x16 type=image/png><link rel=icon href=/icons/32.png sizes=32x32 type=image/png></head><body class="body kind-page"><header class=header><a class=logo href=/>bellbind's trial</a></header><div class=primary><main class=main><nav class="breadcrumb block" aria-label=breadcrumb><ol class=breadcrumb__list><li class=breadcrumb__item><a class=breadcrumbs__link href=/>/</a></li><li class=breadcrumb__item><a class=breadcrumbs__link href=/post/>Posts</a></li><li class="breadcrumbs__item breadcrumb__item--active" aria-current=page>Windows11でhugoを使用する手順</li></ol></nav><div class="single block"><article class=entry><div class="entry__meta meta mb"><time class="entry__meta-published meta-published" datetime=2023-06-14T14:03:21+09:00>2023-06-14 (Wed)</time></div><h1 class=entry__title>Windows11でhugoを使用する手順</h1><details class="entry__toc toc" open><summary class=toc__title>Table of Contents</summary><nav id=TableOfContents><ul><li><a href=#0-windows11上での事前準備>0. Windows11上での事前準備</a></li><li><a href=#1-必要なchocoパッケージのインストール>1. 必要なchocoパッケージのインストール</a></li><li><a href=#2-visual-studio-codeのセットアップ>2. Visual Studio Codeのセットアップ</a></li><li><a href=#3-hogoプロジェクトのセットアップ>3. Hogoプロジェクトのセットアップ</a><ul><li><a href=#31-vscode内でpowershellを開く>3.1. vscode内でPowerShellを開く</a></li><li><a href=#32-powershellのターミナル内でhugo-mod-init-実行>3.2. PowerShellのターミナル内で<code>hugo mod init ...</code>実行</a></li><li><a href=#33-hugotomlでテーマのmodを加えhugo-serverを実行>3.3. <code>hugo.toml</code>でテーマのModを加えhugo serverを実行</a></li></ul></li><li><a href=#4-記事の作成>4. 記事の作成</a></li><li><a href=#5hogoプロジェクトをgitリポジトリ化する>5.Hogoプロジェクトをgitリポジトリ化する</a><ul><li><a href=#51-gitignore-ファイルを作成>5.1. <code>.gitignore</code> ファイルを作成</a></li><li><a href=#52-githubworkflowsgh-pagesymlファイルを作成>5.2. <code>.github/workflows/gh-pages.yml</code>ファイルを作成</a></li><li><a href=#53-gitリポジトリ作成git-initのgui>5.3. gitリポジトリ作成(git initのGUI)</a></li><li><a href=#54-ステージへのファイルの追加git-addのgui>5.4. ステージへのファイルの追加(git addのGUI)</a></li><li><a href=#55-コミット>5.5. コミット</a></li></ul></li><li><a href=#6-githubのプロジェクトページと同期させる>6. githubのプロジェクトページと同期させる</a><ul><li><a href=#61-github上のpages設定の変更>6.1. github上のPages設定の変更</a></li></ul></li></ul></nav></details><div class=entry__content><p>Windows11上でHugoプロジェクトをセットアップし、Github Pagesへの自動更新環境を作る方法。</p><hr><h2 id=0-windows11上での事前準備>0. Windows11上での事前準備</h2><ul><li><ol><li>Windows Updateを全更新の適用完了させる</li></ol></li><li><ol start=2><li>Microsoft Storeのパッケージアップデート: 左下「ライブラリ」より行える</li></ol></li><li><ol start=3><li>Microsoft Storeから、<a href=https://apps.microsoft.com/store/detail/windows-terminal/9N0DX20HK701>Windows Terminal</a>のインストール: Microsoft Storeで「Terminal」で検索</li></ol></li><li><ol start=4><li>Windows Terminalから、<a href=https://qiita.com/probabilityhill/items/f56c9b2882936c296c0e>PowerShellを最新版にアップデート</a>: 現時点の最新バージョンは7.3.4</li></ol></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>Invoke-Expression <span style=color:#e6db74>&#34;&amp; { </span>$(Invoke-RestMethod https<span style=color:#960050;background-color:#1e0010>:</span>//aka.ms/install-powershell.ps1)<span style=color:#e6db74> } -UseMSI&#34;</span>
</span></span></code></pre></div><ul><li><ol start=5><li>Windows Terminalから、<a href=https://chocolatey.org/install>chocolatyインストール</a>: ページ中央にあるコマンドをコピーしてTerminalに貼り付けEnter</li></ol><ul><li>chocoコマンドがインストール済みなら、全パッケージアップグレード: <code>choco upgrade all -y</code> (入れてあったパッケージがメンテされなくなった等で更新中断の赤警告がなくなるまで繰り返す)</li></ul></li></ul><hr><h2 id=1-必要なchocoパッケージのインストール>1. 必要なchocoパッケージのインストール</h2><p>Windows Terminal(でPowerShell)を立ち上げ、以下のコマンドで必要なパッケージをインストールする:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-pwsh data-lang=pwsh><span style=display:flex><span>choco install -y git golang hugo vscode
</span></span></code></pre></div><ul><li>git</li><li>golang</li><li>hugo</li><li>vscode</li></ul><p>(注: テーマによってはsassなど他のツールがさらに必要になるものもある)</p><p>記事編集環境としてvscode(<a href=https://github.com/microsoft/vscode>Visual Studio Code</a> )を使用する。</p><ul><li>vscodeを入れれば、Terminalからは、<code>code</code>コマンドによって、そのディレクトリを開いたvscodeを立ち上げることができるようになる</li></ul><hr><h2 id=2-visual-studio-codeのセットアップ>2. Visual Studio Codeのセットアップ</h2><p>(最初は、一度、「Visual Studio Code」アイコンをクリックして立ち上げ、Japanese Language Packや既存エディタ風キーバインドなどの拡張機能をセットアップしておくとよい)</p><p>Hugoのためには、以下の拡張機能をインストールしておく:</p><ul><li>Better TOML</li><li>Hogo Language and Syntax Support</li><li>PowerShell</li><li>YAML</li></ul><p><img src=./vsc-extensions.png alt="VSC Extensions"></p><hr><h2 id=3-hogoプロジェクトのセットアップ>3. Hogoプロジェクトのセットアップ</h2><ul><li>Githubユーザー(もしくはOrganization)名とリポジトリ名をもとに、Hugoプロジェクトの<a href=../2023-06-12-hugo-mod/>Mod ID</a>を決める。以降のMod ID例: <code>github.com/bellbind-trial/hugo-on-windows</code></li><li>Hogoプロジェクトにする空ディレクトリを作成する: ディレクトリ名の例 <code>hugo-on-windows</code></li></ul><p>vscodeを立ち上げ、、Hogoプロジェクトディレクトリを開く: 左上「≡」 -「ファイル」-「フォルダーを開く&mldr;」</p><hr><h3 id=31-vscode内でpowershellを開く>3.1. vscode内でPowerShellを開く</h3><p>PowerShellを開くと左の「エクスプローラー」が「COMMAND EXPLORER」に切り替わるので、エクスプローラーに戻しておく</p><p><img src=./vsc-powershell.png alt="vscode powershell"></p><hr><h3 id=32-powershellのターミナル内でhugo-mod-init-実行>3.2. PowerShellのターミナル内で<code>hugo mod init ...</code>実行</h3><p>PoserShellのターミナルで、<code>hugo mod init github.com/bellbind-trial/hugo-on-windows</code> を実行する(注: Mod IDは各自適切な名前にすること)</p><p><img src=./vsc-hugo-mod-init.png alt="hugo mod init"></p><hr><h3 id=33-hugotomlでテーマのmodを加えhugo-serverを実行>3.3. <code>hugo.toml</code>でテーマのModを加えhugo serverを実行</h3><ul><li><ol><li><code>content/</code>フォルダと、テーマのMod IDをセットした<code>hugo.toml</code>ファイルを作成する</li></ol><ul><li>例: <a href=https://themes.gohugo.io/themes/poison/>https://themes.gohugo.io/themes/poison/</a> : テーマの「Download」のgit URLからMod IDは <code>github.com/lukeorth/poison</code>を用いる</li></ul></li><li><ol start=2><li>PowerShellのターミナルで、<code>hugo server</code>を実行する</li></ol></li></ul><p><img src=./vsc-hugo-server.png alt="hugo mod init"></p><p>手元のブラウザで<code>http://localhost:1313/</code>を開いてWebページが表示されることを確認する。</p><hr><h2 id=4-記事の作成>4. 記事の作成</h2><p>例として、記事<code>posts/first-post/index.md</code>を作成する。</p><ul><li><ol><li>PowerShellの「+」でターミナルを追加する</li></ol></li><li><ol start=2><li>新たに開いたTerminal <code>pwsh</code>で、<code>hugo new posts/first-post/index.md</code>を実行する</li></ol></li><li><ol start=3><li>左の「エクスプローラー」から、<code>content/</code>フォルダを開き、<code>index.md</code>を編集する</li></ol></li><li><ol start=4><li>ブラウザで記事が追加されていることを確認する</li></ol></li></ul><p><img src=./vsc-new-post.png alt="new post"></p><p>このあと、各テーマの説明ページにしたがって、<code>hugo.toml</code>を編集し、カスタマイズ(最初に書いた <code>[module]</code> 部分はファイルの一番うしろに置いてよい)し、公開してもよいように調整する。</p><hr><h2 id=5hogoプロジェクトをgitリポジトリ化する>5.Hogoプロジェクトをgitリポジトリ化する</h2><p>重要: まず、vscodeの「設定」で、<strong>「Files: Eol」を<code>\n</code>に変更</strong> すること。</p><p><img src=./vsc-eol-setting.png alt></p><hr><h3 id=51-gitignore-ファイルを作成>5.1. <code>.gitignore</code> ファイルを作成</h3><p><code>gitignore</code>ファイルの内容:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>/public/
</span></span><span style=display:flex><span>/resources/_gen/
</span></span><span style=display:flex><span>/assets/jsconfig.json
</span></span><span style=display:flex><span>/.hugo_build.lock
</span></span><span style=display:flex><span>hugo_stats.json
</span></span></code></pre></div><h3 id=52-githubworkflowsgh-pagesymlファイルを作成>5.2. <code>.github/workflows/gh-pages.yml</code>ファイルを作成</h3><ul><li>参考: フォルダーのトップのファイルを選び「新しいファイル」でパス名に<code>.github/workflows/gh-pages.yml</code>を入れれば、親ディレクトリごと作られる</li></ul><p><code>.github/workflows/gh-pages.yml</code>ファイルの内容:</p><pre tabindex=0><code>name: GitHub Pages

on:
  push:
    branches:
      - main  # Set a branch name to trigger deployment
  pull_request:

jobs:
  deploy:
    runs-on: ubuntu-22.04
    permissions:
      contents: write
    concurrency:
      group: ${{ github.workflow }}-${{ github.ref }}
    steps:
      - uses: actions/checkout@v3
        with:
          submodules: true  # Fetch Hugo themes (true OR recursive)
          fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod

      - name: Setup Go
        uses: actions/setup-go@v4.0.0
        with:
          go-version: &#39;^1.20&#39;

      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: &#39;0.113.0&#39;

      - name: Build
        run: hugo --minify

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        # If you&#39;re changing the branch from main,
        # also change the `main` in `refs/heads/main`
        # below accordingly.
        if: ${{ github.ref == &#39;refs/heads/main&#39; }}
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
</code></pre><hr><h3 id=53-gitリポジトリ作成git-initのgui>5.3. gitリポジトリ作成(git initのGUI)</h3><ul><li>フォルダーにリポジトリ(<code>.git/</code>)がなければ、左の「ソース管理」ボタンを選ぶと、「リポジトリ初期化」ボタンが出てくる</li><li>「リポジトリ初期化」ボタンを押すと、<code>.git/</code>以下が作られ、以降git機能をつかうことができるようになる</li></ul><p><img src=./vsc-git-init.png alt></p><p>作成後、PowerShellのターミナルで、<code>git config user.name</code>と<code>git config user.email</code>を設定しておく必要もある。</p><ul><li>参考: <a href=https://codelikes.com/git-config/>https://codelikes.com/git-config/</a></li></ul><hr><h3 id=54-ステージへのファイルの追加git-addのgui>5.4. ステージへのファイルの追加(git addのGUI)</h3><p>注: 右下にある改行コード(赤囲い部分)は、クリックすれば変更でき、「CRLF」の場合は、追加前に「LF」に変更して「保存」しておく</p><ul><li>各ファイルの右の「U」の状態は「更新あり」の意味</li><li>「変更」の「+」ボタンで、「U」つきファイルの一括追加ができる<ul><li>各ファイルの「+」ボタンで、個別の追加ができる</li></ul></li></ul><p><img src=./vsc-git-add.png alt></p><hr><h3 id=55-コミット>5.5. コミット</h3><ul><li>ステージに追加したファイルは、ファイルの右が「U」から「A」(「追加済み」の意味)になる</li><li>追加後、「コミット」ボタンを押すと、<code>COMMIT_EDITMSG</code>ファイルの編集が開く</li><li>ファイル内にコミットメッセージを埋め、<strong>「保存」</strong> する</li><li>右上の「✓」ボタンを押すことでコミットが完了する</li></ul><p><img src=./vsc-git-commit.png alt></p><p>(より複雑な<code>git commit --amend</code>のようなものに相当する操作は、「ソース管理」の右の「・・・」の「コミット」メニュー内に存在する)</p><p>以降、編集作業は、ファイルの追加や更新をしたあと、変更ファイルのステージ追加(5.5.)とコミット(5.6.)を繰り返すことで行う。</p><hr><h2 id=6-githubのプロジェクトページと同期させる>6. githubのプロジェクトページと同期させる</h2><ul><li>まず、github上に <strong>空のプロジェクト</strong> (READMEやLICENSE, .gitignoreはすべてNone)を作成し、git URLを控えておく</li><li>「ソース管理」の右の「・・・」から、「リモート」- 「リモートの追加&mldr;」を選ぶ</li><li>上に出るinputフォームに、先程のgit URLを設定する</li></ul><p><img src=./vsc-git-remote-add.png alt></p><p>リモートの追加が行われると、コミットしてあれば、「変更の同期」ボタンが出るので、押すとpushされる。</p><p><img src=./vsc-git-push-pull.png alt></p><p>(github上で更新があるばあいも、「変更の同期」ボタンが出る)</p><p><code>.github/workflows/gh-pages.yml</code>があるので、「変更の同期」をすれば、HTMLファイルが入った<code>gh-pages</code>ブランチが作られる。</p><hr><h3 id=61-github上のpages設定の変更>6.1. github上のPages設定の変更</h3><p>初回は、github上でリポジトリトの「Settings」 - 「Pages」 - 「Branch」 で、「gh-pages」に変更する必要がある。</p><p><img src=../2023-06-10-github-actions-organization-pages/pages-branch-change.png alt></p></div></article></div></main><div class="authorbox block"><div class=author><figure class=author__avatar><img class=author__img alt="bellbind avatar" src=https://github.com/bellbind.png height=90 width=90></figure><div class=author__body><div class=author__name>bellbind</div><div class=author__bio>https://github.com/bellbind</div></div></div></div></div><footer class=footer><div class="footer__social social"><a class=social__link target=_blank rel="noopener noreferrer" href=https://twitter.com/bellbind><svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 01-40 12 72 72 0 0032-40 72 72 0 01-45 17 72 72 0 00-122 65 2e2 2e2.0 01-145-74 72 72 0 0022 94 72 72 0 01-32-7 72 72 0 0056 69 72 72 0 01-32 1 72 72 0 0067 50A2e2 2e2.0 0193 368a2e2 2e2.0 00309-179 2e2 2e2.0 0035-37"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://github.com/bellbind><svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg></a></div><div class=footer__copyright>© 2023 bellbind. <span class=footer__copyright-credits>Powered by <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/vimux/binario rel="nofollow noopener" target=_blank>Binario</a> theme.</span></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script></body></html>