<!doctype html><html class=no-js lang=ja-jp><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#1b1b1b"><title>Windows11でhugoを使用する手順 | bellbind's trial</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="Windows11でhugoを使用する手順"><meta property="og:description" content="Windows11上でHugoプロジェクトをセットアップし、Github Pagesへの自動更新環境を作る方法。"><meta property="og:type" content="article"><meta property="og:url" content="/post/2023-06-14-hugo-on-windows/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-06-14T14:03:21+09:00"><meta property="article:modified_time" content="2023-06-14T14:03:21+09:00"><meta itemprop=name content="Windows11でhugoを使用する手順"><meta itemprop=description content="Windows11上でHugoプロジェクトをセットアップし、Github Pagesへの自動更新環境を作る方法。"><meta itemprop=datePublished content="2023-06-14T14:03:21+09:00"><meta itemprop=dateModified content="2023-06-14T14:03:21+09:00"><meta itemprop=wordCount content="415"><meta itemprop=keywords content="hugo,hugo mod,windows,github,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Windows11でhugoを使用する手順"><meta name=twitter:description content="Windows11上でHugoプロジェクトをセットアップし、Github Pagesへの自動更新環境を作る方法。"><link rel=stylesheet href=/css/bundle.css><link rel=stylesheet href=/css/themes/dark-blue.css><link rel=icon href=/icons/16.png sizes=16x16 type=image/png><link rel=icon href=/icons/32.png sizes=32x32 type=image/png></head><body class="body kind-page"><header class=header><a class=logo href=/>bellbind's trial</a></header><div class=primary><main class=main><nav class="breadcrumb block" aria-label=breadcrumb><ol class=breadcrumb__list><li class=breadcrumb__item><a class=breadcrumbs__link href=/>/</a></li><li class=breadcrumb__item><a class=breadcrumbs__link href=/post/>Posts</a></li><li class="breadcrumbs__item breadcrumb__item--active" aria-current=page>Windows11でhugoを使用する手順</li></ol></nav><div class="single block"><article class=entry><div class="entry__meta meta mb"><time class="entry__meta-published meta-published" datetime=2023-06-14T14:03:21+09:00>2023-06-14 (Wed)</time><div class="entry__meta-tags meta-tags"><span class=meta-tags__list>Tags:
<a class=meta-tags__link href=/tags/hugo/ rel=tag>hugo</a>,
<a class=meta-tags__link href=/tags/hugo-mod/ rel=tag>hugo mod</a>,
<a class=meta-tags__link href=/tags/windows/ rel=tag>windows</a>,
<a class=meta-tags__link href=/tags/github/ rel=tag>github</a></span></div></div><h1 class=entry__title>Windows11でhugoを使用する手順</h1><details class="entry__toc toc" open><summary class=toc__title>Table of Contents</summary><nav id=TableOfContents><ul><li><a href=#0-windows11上での事前準備>0. Windows11上での事前準備</a></li><li><a href=#1-必要なchocoパッケージのインストール>1. 必要なchocoパッケージのインストール</a></li><li><a href=#2-visual-studio-codeのセットアップ>2. Visual Studio Codeのセットアップ</a></li><li><a href=#3-hugoプロジェクトのセットアップ>3. Hugoプロジェクトのセットアップ</a><ul><li><a href=#31-vscode内でpowershellを開く>3.1. vscode内でPowerShellを開く</a></li><li><a href=#32-powershellのターミナル内でhugo-mod-init-実行>3.2. PowerShellのターミナル内で<code>hugo mod init ...</code>実行</a></li><li><a href=#33-hugotomlでテーマのmodを加えhugo-serverを実行>3.3. <code>hugo.toml</code>でテーマのModを加えhugo serverを実行</a></li></ul></li><li><a href=#4-記事の作成>4. 記事の作成</a></li><li><a href=#5hugoプロジェクトをgitリポジトリ化する>5.Hugoプロジェクトをgitリポジトリ化する</a><ul><li><a href=#51-gitignore-ファイルを作成>5.1. <code>.gitignore</code> ファイルを作成</a></li><li><a href=#52-githubworkflowsgh-pagesymlファイルを作成>5.2. <code>.github/workflows/gh-pages.yml</code>ファイルを作成</a></li><li><a href=#53-gitリポジトリ作成git-initのgui>5.3. gitリポジトリ作成(git initのGUI)</a></li><li><a href=#54-ステージへのファイルの追加git-addのgui>5.4. ステージへのファイルの追加(git addのGUI)</a></li><li><a href=#55-コミット>5.5. コミット</a></li></ul></li><li><a href=#6-github上のgitリポジトリと同期させる>6. github上のgitリポジトリと同期させる</a><ul><li><a href=#61-github上で空リポジトリを作成>6.1. github上で空リポジトリを作成</a></li><li><a href=#62-vscodeへgithubのリポジトリのgit-urlを設定>6.2. vscodeへgithubのリポジトリのgit URLを設定</a></li><li><a href=#63-github上のpages設定のブランチ変更>6.3. github上のPages設定のブランチ変更</a></li></ul></li><li><a href=#a-githubのssh認証設定方法>A. githubのssh認証設定方法</a><ul><li><a href=#a1-公開鍵生成-ssh-keygen>A.1. 公開鍵生成: <code>ssh-keygen</code></a></li><li><a href=#a2-公開鍵のテキストをクリップボードにコピー-clip>A.2. 公開鍵のテキストをクリップボードにコピー: <code>clip</code></a></li><li><a href=#a3-githubへ公開鍵を登録>A.3. githubへ公開鍵を登録</a></li></ul></li><li><a href=#b-github上の更新をvscodeで反映させる方法>B. github上の更新をvscodeで反映させる方法</a></li></ul></nav></details><div class=entry__content><p>Windows11上でHugoプロジェクトをセットアップし、Github Pagesへの自動更新環境を作る方法。</p><hr><hr><h2 id=0-windows11上での事前準備>0. Windows11上での事前準備</h2><ol><li>Windows Updateを全更新の適用完了させる</li><li>Microsoft Storeのパッケージアップデート: 左下「ライブラリ」より行える</li><li>Microsoft Storeから、<a href=https://apps.microsoft.com/store/detail/windows-terminal/9N0DX20HK701>Windows Terminal</a>のインストール: Microsoft Storeで「Terminal」で検索</li><li>Windows Terminalから、<a href=https://qiita.com/probabilityhill/items/f56c9b2882936c296c0e>PowerShellを最新版にアップデート</a>: 現時点の最新バージョンは7.3.4</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>Invoke-Expression <span style=color:#e6db74>&#34;&amp; { </span>$(Invoke-RestMethod https<span style=color:#960050;background-color:#1e0010>:</span>//aka.ms/install-powershell.ps1)<span style=color:#e6db74> } -UseMSI&#34;</span>
</span></span></code></pre></div><ol start=5><li>Windows Terminalから、<a href=https://chocolatey.org/install>chocolateyインストール</a>: ページ中央にあるコマンドをコピーしてTerminalに貼り付けEnter<ul><li>chocoコマンドがインストール済みなら、全パッケージアップグレード: <code>choco upgrade all -y</code> (入れてあったパッケージがメンテされなくなった等で更新中断の赤警告がなくなるまで繰り返す)</li></ul></li></ol><hr><hr><h2 id=1-必要なchocoパッケージのインストール>1. 必要なchocoパッケージのインストール</h2><p>「 <strong>管理者として実行</strong> 」によって、Windows Terminal(でPowerShell)を立ち上げる。</p><ul><li>「ターミナル」アイコンの上で右クリックすることで、コンテキストメニューを開く</li></ul><p><img src=./win-term-admin.png alt></p><p>ターミナル上で、以下のコマンドで必要なパッケージをインストールする:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>choco install -y git golang hugo hugo-extended vscode
</span></span></code></pre></div><ul><li>git</li><li>golang</li><li>hugo</li><li>hugo-extended</li><li>vscode</li></ul><p>記事編集環境としてvscode(<a href=https://github.com/microsoft/vscode>Visual Studio Code</a> )を使用する。</p><ul><li>vscodeを入れれば、Terminalからは、<code>code</code>コマンドによって、そのディレクトリを開いたvscodeを立ち上げることができるようになる</li></ul><hr><hr><h2 id=2-visual-studio-codeのセットアップ>2. Visual Studio Codeのセットアップ</h2><p>(最初は、一度、「Visual Studio Code」アイコンをクリックして立ち上げ、Japanese Language Packや既存エディタ風キーバインドなどの拡張機能をセットアップしておくとよい)</p><p>Hugoのためには、以下の拡張機能をインストールしておく:</p><ul><li>Better TOML</li><li>Hugo Language and Syntax Support</li><li>PowerShell</li><li>YAML</li></ul><p><img src=./vsc-extensions.png alt="VSC Extensions"></p><hr><hr><h2 id=3-hugoプロジェクトのセットアップ>3. Hugoプロジェクトのセットアップ</h2><ul><li>Githubユーザー(もしくはOrganization)名とリポジトリ名をもとに、Hugoプロジェクトの<a href=../2023-06-12-hugo-mod/>Mod ID</a>(github上のプロジェクトのURLに基づくユニーク名)を決める<ul><li><code>github.com/bellbind-trial/hugo-on-windows</code>: 以降のHugoプロジェクト例のMod ID</li></ul></li><li>Hugoプロジェクトにする空ディレクトリを作成する<ul><li><code>hugo-on-windows</code>: Hugoプロジェクト例のディレクトリ名</li></ul></li></ul><p>vscodeを立ち上げ、、Hugoプロジェクトディレクトリを開く: 左上「≡」 -「ファイル」-「フォルダーを開く&mldr;」</p><hr><h3 id=31-vscode内でpowershellを開く>3.1. vscode内でPowerShellを開く</h3><p>PowerShellを開くと左の「エクスプローラー」が「COMMAND EXPLORER」に切り替わるので、エクスプローラーに戻しておく</p><p><img src=./vsc-powershell.png alt="vscode powershell"></p><hr><h3 id=32-powershellのターミナル内でhugo-mod-init-実行>3.2. PowerShellのターミナル内で<code>hugo mod init ...</code>実行</h3><p>PoserShellのターミナルで、以下のコマンドを実行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>hugo mod init github.com/bellbind-trial/hugo-on-windows
</span></span></code></pre></div><p>(注: Mod IDは各自適切な名前にすること)</p><p><img src=./vsc-hugo-mod-init.png alt="hugo mod init"></p><hr><h3 id=33-hugotomlでテーマのmodを加えhugo-serverを実行>3.3. <code>hugo.toml</code>でテーマのModを加えhugo serverを実行</h3><ol><li><code>content/</code>フォルダと、テーマのMod IDをセットした<code>hugo.toml</code>ファイルを作成する<ul><li>例: <a href=https://themes.gohugo.io/themes/poison/>https://themes.gohugo.io/themes/poison/</a> : テーマの「Download」のgit URLからMod IDは <code>github.com/lukeorth/poison</code>を用いる</li></ul></li><li>PowerShellのターミナルで、<code>hugo server</code>を実行する(hugo serverを実行しているPowerShellウインドウは閉じないこと)</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>hugo server
</span></span></code></pre></div><p><img src=./vsc-hugo-server.png alt="hugo mod init"></p><p>手元のブラウザで<code>http://localhost:1313/</code>を開いてWebページが表示されることを確認する。</p><hr><hr><h2 id=4-記事の作成>4. 記事の作成</h2><p>例として、記事<code>posts/first-post/index.md</code>を作成する。</p><ul><li>この例で記事名を<code>posts/...</code>にしている理由は、これがpoisonテーマが要請するサイト構造だからである。テーマによって構造化に必要な記事名のパターンが存在しているので、説明やソースの<code>exampleSite</code>を見て調べてから記事を作成すること。</li></ul><ol><li>PowerShellの「+」でターミナルを追加する</li><li>新たに開いたターミナルで、<code>hugo new posts/first-post/index.md</code>を実行する</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>hugo new posts/first-post/index.md
</span></span></code></pre></div><ol start=3><li>左の「エクスプローラー」から、<code>content/</code>フォルダを開き、<code>index.md</code>を編集する</li><li>ブラウザで記事が追加されていることを確認する</li></ol><p><img src=./vsc-new-post.png alt="new post"></p><p>このあと、各テーマの説明ページにしたがって、<code>hugo.toml</code>を編集し、カスタマイズ(最初に書いた <code>[module]</code> 部分はファイルの一番うしろに置いてよい)し、公開してもよいように調整する。</p><hr><hr><h2 id=5hugoプロジェクトをgitリポジトリ化する>5.Hugoプロジェクトをgitリポジトリ化する</h2><p>重要: vscodeの「設定」で、<strong>「Files: Eol」を<code>\n</code>に変更</strong> すること。</p><p><img src=./vsc-eol-setting.png alt></p><hr><h3 id=51-gitignore-ファイルを作成>5.1. <code>.gitignore</code> ファイルを作成</h3><p><code>.gitignore</code>ファイルの内容:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>/public/
</span></span><span style=display:flex><span>/resources/_gen/
</span></span><span style=display:flex><span>/assets/jsconfig.json
</span></span><span style=display:flex><span>/.hugo_build.lock
</span></span><span style=display:flex><span>hugo_stats.json
</span></span></code></pre></div><h3 id=52-githubworkflowsgh-pagesymlファイルを作成>5.2. <code>.github/workflows/gh-pages.yml</code>ファイルを作成</h3><ul><li>参考: フォルダーのトップのファイルを選び「新しいファイル」でパス名に<code>.github/workflows/gh-pages.yml</code>を入れれば、親ディレクトリごと作られる</li></ul><p><code>.github/workflows/gh-pages.yml</code>ファイルの内容:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>GitHub Pages</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>main </span> <span style=color:#75715e># Set a branch name to trigger deployment</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>pull_request</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>permissions</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>contents</span>: <span style=color:#ae81ff>write</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>concurrency</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>group</span>: <span style=color:#ae81ff>${{ github.workflow }}-${{ github.ref }}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Go</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/setup-go@v4</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>go-version</span>: <span style=color:#e6db74>&#39;stable&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;latest&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># If you&#39;re changing the branch from main,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># also change the `main` in `refs/heads/main`</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># below accordingly.</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>${{ github.ref == &#39;refs/heads/main&#39; }}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>github_token</span>: <span style=color:#ae81ff>${{ secrets.GITHUB_TOKEN }}</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
</span></span></code></pre></div><p>(各システムの最新版を使う設定。失敗する場合は、失敗しないバージョンで固定する。)</p><hr><h3 id=53-gitリポジトリ作成git-initのgui>5.3. gitリポジトリ作成(git initのGUI)</h3><ul><li>フォルダーにリポジトリ(<code>.git/</code>)がなければ、左の「ソース管理」ボタンを選ぶと、「リポジトリ初期化」ボタンが出てくる<ul><li>「リポジトリ初期化」ボタンを押すと、<code>.git/</code>以下が作られ、以降gitリポジトリ管理の機能が使用可能になる</li></ul></li></ul><p><img src=./vsc-git-init.png alt></p><p>リポジトリ作成後、PowerShellのターミナルで、<code>git config user.name</code>と<code>git config user.email</code>を設定しておく必要もある。</p><ul><li>参考: <a href=https://codelikes.com/git-config/>https://codelikes.com/git-config/</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>git config user.name <span style=color:#e6db74>&#34;githubで使っているユーザー名&#34;</span>
</span></span><span style=display:flex><span>git config user.email <span style=color:#e6db74>&#34;githubへ登録したメールアドレス&#34;</span>
</span></span></code></pre></div><p>(globalで設定してあれば不要)</p><hr><h3 id=54-ステージへのファイルの追加git-addのgui>5.4. ステージへのファイルの追加(git addのGUI)</h3><p>注: 右下にある改行コード(赤囲い部分)は、クリックすれば変更でき、「CRLF」の場合は、追加前に「LF」に変更して「保存」しておく</p><ul><li>各ファイルの右の「U」の状態は「更新あり」の意味</li><li>「変更」の「+」ボタンで、「U」つきファイルの一括追加ができる<ul><li>各ファイルの「+」ボタンで、個別の追加ができる</li></ul></li></ul><p><img src=./vsc-git-add.png alt></p><hr><h3 id=55-コミット>5.5. コミット</h3><ol><li>ステージに追加したファイルは、ファイルの右が「U」から「A」(「追加済み」の意味)になる</li><li>追加後、「コミット」ボタンを押すと、<code>COMMIT_EDITMSG</code>ファイルの編集が開く</li><li>ファイル内にコミットメッセージを埋め、<strong>「保存」</strong> する</li><li>右上の「✓」ボタンを押すことでコミットが完了する</li></ol><p><img src=./vsc-git-commit.png alt></p><p>(より複雑な<code>git commit --amend</code>のようなものに相当する操作は、「ソース管理」の右の「・・・」の「コミット」メニュー内に存在する)</p><p>以降、編集作業は、ファイルの追加や更新をしたあと、変更ファイルのステージ追加(5.5.)とコミット(5.6.)を繰り返すことで行う。</p><hr><hr><h2 id=6-github上のgitリポジトリと同期させる>6. github上のgitリポジトリと同期させる</h2><p>gitリポジトリの内容をgithubへpushする大前提として、github上にアカウントがあり、sshの<a href=https://docs.github.com/ja/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account>公開鍵(<code>~/.ssh/id_rsa.pub</code>や<code>~/.ssh/id_ed25519.pub</code>など)を登録</a>してある必要がある。</p><ul><li>詳細は<a href=#a-github%E3%81%AEssh%E8%AA%8D%E8%A8%BC%E8%A8%AD%E5%AE%9A%E6%96%B9%E6%B3%95>付録A</a>へ</li></ul><hr><h3 id=61-github上で空リポジトリを作成>6.1. github上で空リポジトリを作成</h3><p>まず、github上に <strong>空のリポジトリ</strong> (READMEなし、Licenseと.gitignoreはすべてNone)を作成し、git URL(<code>git@github.com:....</code>)を控えておく</p><p><img src=gh-new-repo.png alt></p><hr><h3 id=62-vscodeへgithubのリポジトリのgit-urlを設定>6.2. vscodeへgithubのリポジトリのgit URLを設定</h3><ol><li>「ソース管理」の右の「・・・」から、「リモート」- 「リモートの追加&mldr;」を選ぶ</li><li>上に出るinputフォームに、先程のgit URLを設定する</li></ol><p><img src=./vsc-git-remote-add.png alt></p><p>リモートの追加が行われると、コミットしてあれば、「変更の同期」ボタンが出るので、押すとpushされる。</p><p><img src=./vsc-git-push-pull.png alt></p><p>Github Actionsのための<code>.github/workflows/gh-pages.yml</code>を含めてあるため、「変更の同期」をすれば、githubクラウド上でHTMLファイルが入った<code>gh-pages</code>ブランチが作られる。</p><ul><li>github上の更新を取り込む方法は<a href=#b-github%E4%B8%8A%E3%81%AE%E6%9B%B4%E6%96%B0%E3%82%92vscode%E3%81%A7%E5%8F%8D%E6%98%A0%E3%81%95%E3%81%9B%E3%82%8B%E6%96%B9%E6%B3%95>付録B</a>へ</li></ul><hr><h3 id=63-github上のpages設定のブランチ変更>6.3. github上のPages設定のブランチ変更</h3><p>Github PagesでWebサイトを使用できようにするには、初回のpushを行ってHTMLファイルのある<code>gh-pages</code>ブランチが生成されたあとで、
github上でリポジトリトの「Settings」 - 「Pages」 - 「Branch」 で、「gh-pages」に変更する必要がある。</p><p><img src=../2023-06-10-github-actions-organization-pages/pages-branch-change.png alt></p><hr><hr><h2 id=a-githubのssh認証設定方法>A. githubのssh認証設定方法</h2><p>以降のコマンド実行は、PowerShellターミナルで行う(vscode内のPowerShell環境でも可)。</p><ul><li>ssh関係のコマンドは標準でWindows11に入っている</li></ul><h3 id=a1-公開鍵生成-ssh-keygen>A.1. 公開鍵生成: <code>ssh-keygen</code></h3><p>ssh用公開鍵を作成する。いまから作るのであれば、アルゴリズムは<a href=https://tex2e.github.io/rfc-translater/html/rfc8017.html><code>rsa</code></a>よりも
<a href=https://tex2e.github.io/rfc-translater/html/rfc8032.html><code>ed25519</code></a>がよい。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-pwsh data-lang=pwsh><span style=display:flex><span>ssh-keygen -t ed25519
</span></span></code></pre></div><p>以降、ファイル名やパスフレーズの入力を求められるが、文字は入れずに、生成がおわるまで全部<strong>Enterキーのみ</strong> を押しつづける。</p><p>以下のファイルが作られる:</p><ul><li><code>~/.ssh/id_ed25519.pub</code>: 公開鍵テキストファイル</li><li><code>~/.ssh/id_ed25519</code>: プライベート鍵テキストファイル(このファイルからは<code>ssh-keygen -y</code>コマンドで公開鍵テキストも取り出せる)</li></ul><h3 id=a2-公開鍵のテキストをクリップボードにコピー-clip>A.2. 公開鍵のテキストをクリップボードにコピー: <code>clip</code></h3><p>Windows11が備えるクリップボードへのコピーを行うコマンドは <strong><code>clip</code></strong> 。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-pwsh data-lang=pwsh><span style=display:flex><span>cat ~/.ssh/id_ed25519.pub | clip
</span></span></code></pre></div><p>このコマンドを実行したら、公開鍵ファイルの内容を、Ctrl+Vで、ブラウザのテキストエリアへ貼り付けられるようになる。</p><h3 id=a3-githubへ公開鍵を登録>A.3. githubへ公開鍵を登録</h3><p>サインインしたgithubのWebページの右のユーザーアイコン右の「▽」から「 <strong>Settings</strong> 」メニューを開き、左のリストの「 <strong>SSH and GPG Keys</strong> 」を開く。</p><p>この設定ページ内の「SSH keys」の右にある「 <strong>New SSH key</strong>」ボタンを押す。</p><p><img src=./gh-settings-keys.png alt></p><p>入力項目が「Title」、「Key type」、「Key」とあるうちの <strong>「Key」テキストエリア</strong> に、Ctrl+Vで先ほどコピーした公開鍵テキストを貼り付け、
<strong>「Add SSH key」ボタン</strong> を押す(Titleは空欄、Key typeは"Authentication Key"のままでよい)。</p><p><img src=./gh-ssh-add.png alt></p><p>すると<code>Authentication Keys</code>に公開鍵が追加される。
この結果、このマシンから、githubへpushすることができるようになる。</p><hr><hr><h2 id=b-github上の更新をvscodeで反映させる方法>B. github上の更新をvscodeで反映させる方法</h2><p>「同期」をすれば、リモートの更新をローカルへ反映させることができる。</p><p>vscodeには、「同期」実行の２つのUIがある。</p><ul><li>「ソース管理」のメニューから「同期」を選ぶ</li><li>左下の「🔄」を押す</li></ul><p><img src=./vsc-git-sync.png alt></p><hr><hr></div><footer class=entry__footer><div class=entry__tags><a class="entry__tag btn" href=/tags/hugo/>hugo</a>
<a class="entry__tag btn" href=/tags/hugo-mod/>hugo mod</a>
<a class="entry__tag btn" href=/tags/windows/>windows</a>
<a class="entry__tag btn" href=/tags/github/>github</a></div></footer></article></div></main><div class="authorbox block"><div class=author><figure class=author__avatar><img class=author__img alt="bellbind avatar" src=https://github.com/bellbind.png height=90 width=90></figure><div class=author__body><div class=author__name>bellbind</div><div class=author__bio>https://github.com/bellbind</div></div></div></div><div class="related block"><h3 class=related__title>Related</h3><ul class=related__list><li class=related__item><a class=related__link href=/post/2023-06-12-hugo-mod/>テーマをHugo Modulesベースで扱うHugoプロジェクトの作り方</a></li><li class=related__item><a class=related__link href=/post/2023-06-10-github-actions-organization-pages/>HugoサイトをGithub ActionsでOrganization用Github Pagesで公開する</a></li><li class=related__item><a class=related__link href=/post/2023-06-11-hugo-with-git/>git管理前提のhugoプロジェクトの作り方</a></li></ul></div></div><footer class=footer><div class="footer__social social"><a class=social__link target=_blank rel="noopener noreferrer" href=https://twitter.com/bellbind><svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 01-40 12 72 72 0 0032-40 72 72 0 01-45 17 72 72 0 00-122 65 2e2 2e2.0 01-145-74 72 72 0 0022 94 72 72 0 01-32-7 72 72 0 0056 69 72 72 0 01-32 1 72 72 0 0067 50A2e2 2e2.0 0193 368a2e2 2e2.0 00309-179 2e2 2e2.0 0035-37"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://github.com/bellbind><svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg></a></div><div class=footer__copyright>© 2023 bellbind. <span class=footer__copyright-credits>Powered by <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/vimux/binario rel="nofollow noopener" target=_blank>Binario</a> theme.</span></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script></body></html>