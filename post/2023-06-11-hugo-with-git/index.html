<!doctype html><html class=no-js lang=ja-jp><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content="#1b1b1b"><title>git管理前提のhugoプロジェクトの作り方 | bellbind's trial</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><link rel=stylesheet href=/css/bundle.css><link rel=icon href=/icons/16.png sizes=16x16 type=image/png><link rel=icon href=/icons/32.png sizes=32x32 type=image/png></head><body class="body kind-page"><header class=header><a class=logo href=/>bellbind's trial</a></header><div class=primary><main class=main><nav class="breadcrumb block" aria-label=breadcrumb><ol class=breadcrumb__list><li class=breadcrumb__item><a class=breadcrumbs__link href=/>/</a></li><li class=breadcrumb__item><a class=breadcrumbs__link href=/post/>Posts</a></li><li class="breadcrumbs__item breadcrumb__item--active" aria-current=page>git管理前提のhugoプロジェクトの作り方</li></ol></nav><div class="single block"><article class=entry><h1 class=entry__title>git管理前提のhugoプロジェクトの作り方</h1><div class=entry__content><p>Github ActionsでGithub Pagesを更新させるために、そのWebページのソースとなるHugoプロジェクトを作ったあと、gitリポジトリ化する手順。</p><h2 id=1-gitリポジトリを前提としたhugoプロジェクトの作成>1. gitリポジトリを前提としたHugoプロジェクトの作成</h2><p>雛形の時点でgitリポジトリ化する。</p><p>コマンド列:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ hugo new site MY-SITE
</span></span><span style=display:flex><span>$ cd MY-SITE/
</span></span><span style=display:flex><span>$ git init
</span></span><span style=display:flex><span>$ git add .
</span></span><span style=display:flex><span>$ git commit -m <span style=color:#e6db74>&#34;[init]&#34;</span></span></span></code></pre></div><h2 id=2-gitignoreを加える>2. <code>.gitignore</code>を加える</h2><p>Hugo用<code>.gitignore</code>ファイル内容:</p><pre tabindex=0><code class=language-config data-lang=config>/public/
/resources/_gen/
/assets/jsconfig.json
/.hugo_build.lock
hugo_stats.json</code></pre><p>コマンド列(emacsはテキストファイルの編集):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ emacs .gitignore
</span></span><span style=display:flex><span>$ git add .gitignore
</span></span><span style=display:flex><span>$ git commit -m <span style=color:#e6db74>&#34;[add] .gitignore&#34;</span></span></span></code></pre></div><h2 id=3-テーマインストール>3. テーマインストール</h2><p>テーマは以下から選ぶ:</p><ul><li><a href=https://themes.gohugo.io/>https://themes.gohugo.io/</a></li></ul><p>このにあるテーマはgitリポジトリで公開されているので、git submoduleでインストールする:</p><ul><li>使用するテーマ: <a href=https://themes.gohugo.io/themes/risotto/>https://themes.gohugo.io/themes/risotto/</a></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ git submodule add https://github.com/joeroe/risotto.git themes/risotto
</span></span><span style=display:flex><span>$ git commit -m <span style=color:#e6db74>&#34;[add] theme&#34;</span></span></span></code></pre></div><h2 id=a-hugoについて>A. hugoについて</h2><p>hugoは、Markdown形式で書いた文書ファイル(拡張子: .md)群を、HTMLファイル化して、一覧ページももつWebサイトを構成するファイル群に変換するシステム。</p><ul><li><a href=https://gohugo.io/>https://gohugo.io/</a></li></ul><p>生成するWebサイトのHTMLのソースとなるディレクトリは、「Hugoプロジェクト」と呼ぶ。</p><h3 id=hugoコマンドのインストール>hugoコマンドのインストール</h3><p>Hugoのコマンドは、各プラットフォームのパッケージマネージャー経由で導入する。</p><ul><li><a href=https://gohugo.io/installation/>https://gohugo.io/installation/</a></li></ul><h3 id=よく使うhugoコマンド>よく使う<code>hugo</code>コマンド</h3><p>hugoでは、すべてコマンドライン上で<code>hugo</code>コマンドを使用して、Webサイトを構築する処理を行う。</p><ul><li><code>hugo new site SITE-NAME</code>: 空っぽのHugoプロジェクトのファイル群を、<code>SITE-NAME/</code>ディレクトリ以下に生成するコマンド</li><li><code>hugo new ARTICLE-FILE.md</code>: 記事の雛形となる<code>content/ARTICLE-FILE.md</code>ファイルを生成するコマンド</li><li><code>hugo server</code>: プレビューとなるWebサーバを、<code>http://localhost:1313/</code>に立ち上げるコマンド</li><li><code>hugo</code>: <code>public/</code>ディレクトリ以下に、HTMLファイルのWebサイト一式を生成するコマンド</li></ul><h3 id=hugoプロジェクトのファイル構成>Hugoプロジェクトのファイル構成</h3><ul><li>サイト設定用ファイル:<ul><li><code>hugo.toml</code>: hugoコマンドが解釈する設定ファイル</li><li><code>themes/</code>: Webサイトのテーマ(となるHugoプロジェクト)を置く場所</li></ul></li><li>文書用ファイル:<ul><li><code>content/</code>: 個別のWebページのソースとなる文書データのmdファイルを置く場所</li><li><code>static/</code>: 全記事から参照できるファイル(画像など)を置く場所</li></ul></li><li>サイトデザイン用ファイル:<ul><li><code>layouts/</code>: 各Webページの枠部分や、トップページなどの一覧ページを生成するためのテンプレートファイル群</li><li><code>archetypes/</code>: <code>hugo new</code>で作るファイルの雛形となるmdファイルがある場所</li><li><code>data/</code>: layoutのテンプレートが参照する設定ファイルを置く場所</li><li><code>assets/</code>: layoutのテンプレートで使用するファイル(スクリプトやスタイルシートなど)のソースを置く場所</li></ul></li></ul><h3 id=hugoのテーマシステム>hugoのテーマシステム</h3><p>hugoプロジェクトのテーマというのは、既存のHugoサイトの<code>layouts/</code>等のサイトデザインファイル群を継承する仕組み。</p><p>hugoは、Webページを生成する処理で必要なファイルを参照するとき、Hugoサイト自身に存在しなければ、テーマファイルの中の同名ファイルを使用するようになっている。
(テーマの一部を上書きするときは、該当ファイルをHugoサイト直下の同名の位置へコピーして編集する)</p><p>このため、Hugoプロジェクトの構成はは、継承元となるテーマのテンプレートコードに依存したものとなり、テーマによって大きく違うものになる
(扱う<code>content/</code>下のファイル名を特定したテーマもある)。</p><ul><li>現在は、テーマに限らず任意のファイルで、他プロジェクトのファイルを参照可能になるHugo Moduleも備わっている</li></ul><h2 id=b-hugo-modules>B. Hugo Modules</h2><p>テーマに限らず、<code>content/</code>や<code>static/</code>なども他のHugoプロジェクトから継承可能にするのがHugo Modules。
<code>hugo mod</code>コマンドで操作する。</p><ul><li><code>hugo mod</code>を使う場合は、テーマでも<code>git submodule</code>は使わなくなる</li></ul><p>共通の記事や画像のデータがあるサイトを、ファイルコピーせずに管理できるようになる。
ただし、<code>hugo mod</code>を使うには、<code>hugo</code>単体ではなく、<code>git</code>と<code>golang</code>のランタイムもインストールされている必要がある。</p><ul><li><a href=https://gohugo.io/commands/hugo_mod/>https://gohugo.io/commands/hugo_mod/</a></li></ul><p><code>hugo mod init</code>で有効化したあとは、<code>hugo.toml</code>に以下のように書くだけで、テーマが適用されるようになる。</p><p>(<code>path</code>の値はgitリポジトリのURLだが、<code>https://</code>は外す)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[<span style=color:#a6e22e>module</span>]
</span></span><span style=display:flex><span>  [[<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>imports</span>]]
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>path</span> = <span style=color:#e6db74>&#39;github.com/joeroe/risotto&#39;</span></span></span></code></pre></div><p>注: Hugo Moduleを使う場合、<code>layouts/</code>等が直接継承されるので、<code>hugo.toml</code>中の<code>theme = "risotto"</code>の行は消さなくてはいけない。</p></div></article></div></main></div><footer class=footer><div class="footer__social social"><a class=social__link target=_blank rel="noopener noreferrer" href=https://twitter.com/bellbind><svg class="social__icon" aria-label="Twitter" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M437 152a72 72 0 01-40 12 72 72 0 0032-40 72 72 0 01-45 17 72 72 0 00-122 65 2e2 2e2.0 01-145-74 72 72 0 0022 94 72 72 0 01-32-7 72 72 0 0056 69 72 72 0 01-32 1 72 72 0 0067 50A2e2 2e2.0 0193 368a2e2 2e2.0 00309-179 2e2 2e2.0 0035-37"/></svg></a><a class=social__link target=_blank rel="noopener noreferrer" href=https://github.com/bellbind><svg class="social__icon" aria-label="Github" role="img" width="32" height="32" viewBox="0 0 512 512"><path d="M335 499c14 0 12 17 12 17H165s-2-17 12-17c13 0 16-6 16-12l-1-50c-71 16-86-28-86-28-12-30-28-37-28-37-24-16 1-16 1-16 26 2 40 26 40 26 22 39 59 28 74 22 2-17 9-28 16-35-57-6-116-28-116-126 0-28 10-51 26-69-3-6-11-32 3-67 0 0 21-7 70 26 42-12 86-12 128 0 49-33 70-26 70-26 14 35 6 61 3 67 16 18 26 41 26 69 0 98-60 120-117 126 10 8 18 24 18 48l-1 70c0 6 3 12 16 12z"/></svg></a></div><div class=footer__copyright>© 2023 bellbind's trial. <span class=footer__copyright-credits>Powered by <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/vimux/binario rel="nofollow noopener" target=_blank>Binario</a> theme.</span></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script></body></html>